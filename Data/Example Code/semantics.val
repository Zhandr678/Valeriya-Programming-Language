/*
	Value Semantics: default semantics.

	Reference Semantics:
		mutable - reference for declaration, 
		immutable - const reference for declaration,

*/

mutable int a = 5;

// b refers to a's data
mutable int b = a;

// c stores a copy of a's data
mutable int c ~= a;

// d stores a copy a's data
int d = a;

// e is impossible
int e ~= a;

// f refers to a's data, but cannot change it
immutable int f = a;

// g is impossible
immutable int g ~= a;

fn offset(mutable int x, immutable int off) -> void
{
	x += off;
}

mutable int x = 5;
offset(x, x);

// a, b are references that can be updated in the function
fn swap <T> (mutable T a, mutable T b) -> void
{
	// copy a to temp
	T temp = a;
	// 
	a = b;
	b = temp;
}

struct Order
{
	uint id;
	str desc;
	double price;
};

fn view_order(immutable Order o) -> void
{
	print(f"Order ID: {o.id}");
	print(f"Price: {o.price}");
}

mutable int sw1 = 10, sw2 = 20;

// inout only works with mutables
swap <int>(sw1, sw2);



// works, gets a copy: o = order1
Order order1(1, "Book1", 5000.0);
view_order(order1);

// works, just does not change the order2
mutable Order order2(2, "Book2", 10000.0);
view_order(order2);

// works, as expected
immutable Order order3(3, "Book3", 2000.0);
view_order(order3);